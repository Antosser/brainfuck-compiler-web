var __values=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};!function(){var p,l,i,c,u,a,o,d=[function(e){for(var t=e.split("\n"),n=0;n<t.length;n++)t[n]=t[n].trim();return t.join("\n")},function(e){for(var t=e.split("\n"),n="",r=0;r<t.length;r++)t[r].startsWith("//")||(n+=t[r]+"\n");return n},function(e){return e.split("\n").filter(function(e){return e}).join("\n")},function(e){var t=e.split("\n");return t.includes("newl")&&(e="var newl\nadd newl 10\n"+e),t.includes("space")&&(e="var space\nadd space 32\n"+e),e}],m=[function(e){for(var t="",n=0;n<e.length;n++)t+=e[n],(n+1)%100==0&&(t+="\n");return t}],s=function(e,t){this.type=e,this.variables=[],this.variable=t},t=function(e){var t=this;this.assignments=new Map;var n=1;e.forEach(function(e){t.assignments.set(e,n),n++})};function f(e,t,n){if(t.length!=n)throw $("#output").val("Error: "+e+" accepts "+n+" arguments but "+t.length+" were given."),new Error("Code error")}function h(e,t,n){if(t.length<n)throw $("#output").val("Error: "+e+" accepts "+n+" or more arguments but "+t.length+" were given."),new Error("Code error")}function v(e){if(!p.has(e))throw $("#output").val("Error: Variable "+e+" does not exist."),new Error("Code error")}function w(e){for(var t=p.get(e)-i,n=0;n<Math.abs(t);n++)t<0?c+="<":0<t&&(c+=">");i+=t}var g={createVariable:function(e){if(f("var",e,1),!p.has(e[0])){for(var t=0,n=0;;n++)if(!l.includes(n)){t=n;break}p.set(e[0],t),l.push(t),u[u.length-1].variables.push(t)}},add:function(e){var t=parseInt(e[1]);f("add",e,2),v(e[0]);var n=function(e){for(var t=[],n=[0,0],r=9999,i=-5;i<6;i++)for(var a=1;a<e+i+1;a++)(e+i)%a==0&&(t.push([a,Math.floor((e+i)/a)]),a+(e+i)/a+Math.abs(i)<r&&(r=a+(e+1)/a+Math.abs(i),n=[a,Math.floor((e+i)/a)]));return n}(Math.abs(t));if(n[0]+n[1]+5>Math.abs(t)){w(e[0]);for(var r=0;r<Math.abs(t);r++)0<t&&(c+="+"),t<0&&(c+="-")}else{w("temp");for(r=0;r<Math.floor(n[0]);r++)c+="+";c+="[",w(e[0]);for(r=0;r<Math.floor(n[1]);r++)0<t&&(c+="+"),t<0&&(c+="-");w("temp"),c+="-]";var i=1;t<0&&(i*=-1),w(e[0]);for(var a=t-Math.floor(n[0])*Math.floor(n[1]*i),r=0;r<Math.abs(Math.floor(a));r++)0<Math.floor(a)&&(c+="+"),Math.floor(a)<0&&(c+="-")}},clear:function(e){f("clear",e,1),v(e[0]),w(e[0]),c+="[-]"},set:function(e){f("set",e,2),v(e[0]),g.clear([e[0]]),g.add([e[0],e[1]])},move:function(e){f("move",e,2),v(e[0]),v(e[1]),w(e[0]),c+="[-",w(e[1]),c+="+",w(e[0]),c+="]"},copy:function(e){h("copy",e,2);for(var t=e.slice(1),n=t.length,r=0;r<n;r++)v(t[r]);g.move([e[0],"temp"]),w("temp"),c+="[-";for(r=0;r<e.length;r++)w(e[r]),c+="+";w("temp"),c+="]"},multiply:function(e){f("multiply",e,2),v(e[0]),g.move([e[0],"temp"]),w("temp"),c+="[-",w(e[0]),c+="+".repeat(parseInt(e[1])),w("temp"),c+="]"},pause:function(e){f("pause",e,0),w("temp"),c+="[]-[]"},while:function(e){f("#while",e,1),v(e[0]),w(e[0]),c+="[",u.push(new s("while",e[0]))},end:function(e){var t,n;f("end",e,0);var r=u.pop();try{for(var i=__values(p.keys()),a=i.next();!a.done;a=i.next()){var o=a.value;r.variables.includes(p.get(o))&&p.delete(o)}}catch(e){t={error:e}}finally{try{a&&!a.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}l=l.filter(function(e){return!r.variables.includes(e)}),"while"==r.type&&(w(r.variable),c+="]")},scope:function(e){f("#scope",e,0),u.push(new s("scope"))},input:function(e){f("input",e,1),v(e[0]),w(e[0]),c+=","},print:function(e){f("print",e,1),v(e[0]),w(e[0]),c+="."},printletter:function(e){f("printletter",e,1),g.set(["temp2",e[0].charCodeAt(0)]),w("temp2"),c+=".",g.clear(["temp2"])},addletter:function(e){f("addletter",e,2),v(e[0]),g.add([e[0],e[1].charCodeAt(0)])},setletter:function(e){f("setletter",e,2),v(e[0]),g.set([e[0],e[1].charCodeAt(0)])},if:function(e){f("#if",e,3),v(e[0]),g.createVariable(["temp3"]),"var"==e[1]?(v(e[2]),g.move([e[0],"temp2"]),g.while(["temp2"]),g.add([e[0],1]),g.add(["temp",1]),g.add(["temp2",-1]),g.end([]),g.move([e[2],"temp2"]),g.while(["temp2"]),g.add([e[2],1]),g.add(["temp3",1]),g.add(["temp2",-1]),g.end([]),g.while(["temp"]),g.add(["temp",-1]),g.add(["temp3",-1]),g.end([]),g.add(["temp2",1]),g.while(["temp3"]),g.clear(["temp3"]),g.add(["temp2",-1]),g.end([]),g.while(["temp2"]),g.clear(["temp2"])):"num"!=e[1]&&"letter"!=e[1]||("letter"==e[1]&&(e[1]=e[1].charCodeAt(0)),g.copy([e[0],"temp3"]),g.add(["temp2",e[2]]),g.while(["temp3"]),g.add(["temp3",-1]),g.add(["temp2",-1]),g.end([]),g.move(["temp2","temp"]),g.while(["temp"]),g.clear(["temp"]),g.add(["temp2",1]),g.end([]),g.add(["temp2",-1]),g.while(["temp2"]),g.clear(["temp2"]))},ifn:function(e){f("#ifn",e,3),g.if(e),g.else([])},else:function(e){g.set(["temp",-1]),g.end([]),g.add(["temp",1]),g.while(["temp"]),g.clear(["temp"])},printstr:function(e){h("printstr",e,1);for(var t=0,n=e.join(" "),r=0;r<n.length;r++)g.add(["temp2",n.charCodeAt(r)-t]),t=n.charCodeAt(r),g.print(["temp2"]);g.clear(["temp2"])},printl:function(e){h("printstr",e,1);for(var t=0,n=e.join(" "),r=0;r<n.length;r++)g.add(["temp2",n.charCodeAt(r)-t]),t=n.charCodeAt(r),g.print(["temp2"]);g.add(["temp2",10-t]),g.print(["temp2"]),g.clear(["temp2"])},iftrue:function(e){f("#iftrue",e,1),v(e[0]),g.copy([e[0],"temp2"]),g.while(["temp2"]),g.clear(["temp2"])},iffalse:function(e){f("#iffalse",e,1),v(e[0]),g.iftrue([e[0]]),g.add(["temp",1]),g.end([]),g.add(["temp",-1]),g.while(["temp"]),g.clear(["temp"])},imove:function(e){f("imove",e,2),v(e[0]),v(e[1]),g.while([e[0]]),g.add([e[0],-1]),g.add([e[1],-1]),g.end([])},divnum:function(e){f("div",e,3),v(e[0]),v(e[2]),g.createVariable(["temp4"]);var t=parseInt(e[1]);g.move([e[0],"temp4"]),g.while(["temp4"]),g.add(["temp4",-1]),g.add([e[2],1]),g.if([e[2],"num",t]),g.clear([e[2]]),g.add([e[0],1]),g.end([]),g.end([])},goto:function(e){f("move",e,1),v(e[0]),w(e[0])},printdec:function(e){f("printdec",e,1),v(e[0]),g.createVariable(["temp4"]),g.createVariable(["printdec-one"]),g.createVariable(["printdec-ten"]),g.createVariable(["printdec-hun"]),g.clear(["printdec-one"]),g.clear(["printdec-ten"]),g.clear(["printdec-hun"]),g.copy([e[0],"printdec-one"]),g.divnum(["printdec-one",10,"printdec-ten"]),g.switch(["printdec-one","printdec-ten"]),g.divnum(["printdec-ten",10,"printdec-hun"]),g.switch(["printdec-ten","printdec-hun"]),g.copy(["printdec-hun","temp4"]),g.iftrue(["temp4"]),g.add(["printdec-hun",48]),g.print(["printdec-hun"]),g.end([]),g.copy(["printdec-ten","temp4"]),g.iftrue(["temp4"]),g.add(["printdec-ten",48]),g.print(["printdec-ten"]),g.end([]),g.clear(["temp4"]),g.add(["printdec-one",48]),g.print(["printdec-one"])},switch:function(e){f("switch",e,2),v(e[0]),v(e[1]),g.move([e[0],"temp"]),g.move([e[1],e[0]]),g.move(["temp",e[1]])},newl:function(e){f("newl",e,0),g.print(["newl"])},space:function(e){f("space",e,0),g.print(["space"])},for:function(e){f("#for",e,1),v(e[0]),g.while([e[0]]),g.add([e[0],-1])},enumtype:function(e){h("enumtype",e,2),a.set(e[0],new t(e.splice(1)))},createenum:function(e){if(f("createeum",e,2),!a.has(e[1]))throw $("#output").val("No enum type "+e[1]+" exists"),new Error("Code error");o.set(e[0],e[1]),g.createVariable([e[0]])},setenum:function(e){if(h("setenum",e,2),!o.has(e[0]))throw $("#output").val("No enum "+e[0]+" exists"),new Error("Code error");if(!a.get(o.get(e[0])).assignments.has(e[1]))throw $("#output").val("Enum type "+o.get(e[0])+" does not have a property: "+e[1]),new Error("Code error");g.set([e[0],a.get(o.get(e[0])).assignments.get(e[1])])},ifenum:function(e){if(h("#ifenum",e,2),!o.has(e[0]))throw $("#output").val("No enum "+e[0]+" exists"),new Error("Code error");if(!a.get(o.get(e[0])).assignments.has(e[1]))throw $("#output").val("Enum type "+o.get(e[0])+" does not have a property: "+e[1]),new Error("Code error");g.if([e[0],"num",a.get(o.get(e[0])).assignments.get(e[1])])},ifnenum:function(e){h("#ifenum",e,2),g.ifenum(e),g.else([])}},b={var:g.createVariable,add:g.add,addletter:g.addletter,setletter:g.setletter,clear:g.clear,set:g.set,move:g.move,imove:g.imove,copy:g.copy,multiply:g.multiply,"#pause":g.pause,"#for":g.for,"#while":g.while,"#end":g.end,"#scope":g.scope,input:g.input,print:g.print,printletter:g.printletter,printstr:g.printstr,printl:g.printl,divnum:g.divnum,"#if":g.if,"#iftrue":g.iftrue,"#iffalse":g.iffalse,"#else":g.else,goto:g.goto,printdec:g.printdec,switch:g.switch,newl:g.newl,space:g.space,enumtype:g.enumtype,createenum:g.createenum,setenum:g.setenum,"#ifenum":g.ifenum,"#ifnenum":g.ifnenum};$("#build").click(function(){(p=new Map).set("temp2",0),p.set("temp",1),l=[0,1],i=0,c="",u=[new s("scope")],a=new Map,o=new Map;for(var e=$("#input").val(),t=0;t<d.length;t++)e=d[t](e);for(var n=e.split("\n"),r=Array(n.length).fill(null),t=0;t<n.length;t++){if(r[t]=n[t].split(" "),!b.hasOwnProperty(r[t][0]))throw $("#output").val("Error: Command "+r[t][0]+" does not exist."),new Error("Error");b[r[t][0]](r[t].slice(1))}for(t=0;t<m.length;t++)c=m[t](c);$("#output").val(c)}),null===localStorage.getItem("bfc-text")?localStorage.setItem("bfc-text",""):$("#input").val(localStorage.getItem("bfc-text")),$("#input").on("input",function(){localStorage.setItem("bfc-text",$("#input").val())}),$("#rmLocalStorage").click(function(){$("#input").val(""),$("#output").val(""),localStorage.setItem("bfc-text","")})}();