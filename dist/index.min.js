"use strict";var __values=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};exports.__esModule=!0,require("core-js/es6/symbol"),require("core-js/es6/object"),require("core-js/es6/function"),require("core-js/es6/parse-int"),require("core-js/es6/parse-float"),require("core-js/es6/number"),require("core-js/es6/math"),require("core-js/es6/string"),require("core-js/es6/date"),require("core-js/es6/array"),require("core-js/es6/regexp"),require("core-js/es6/map"),require("core-js/es6/weak-map"),require("core-js/es6/set"),function(){var p,c,i,u,l,o,a,s=[function(e){for(var t=e.split("\n"),r=0;r<t.length;r++)t[r]=t[r].trim();return t.join("\n")},function(e){for(var t=e.split("\n"),r="",n=0;n<t.length;n++)t[n].startsWith("//")||(r+=t[n]+"\n");return r},function(e){return e.split("\n").filter(function(e){return e}).join("\n")},function(e){var t=e.split("\n");return t.includes("newl")&&(e="var newl\nadd newl 10\n"+e),t.includes("space")&&(e="var space\nadd space 32\n"+e),e}],d=[function(e){for(var t="",r=0;r<e.length;r++)t+=e[r],(r+1)%100==0&&(t+="\n");return t}],m=function(e,t){this.type=e,this.variables=[],this.variable=t},t=function(e){var t=this;this.assignments=new Map;var r=1;e.forEach(function(e){t.assignments.set(e,r),r++})};function f(e,t,r){if(t.length!=r)throw $("#output").val("Error: "+e+" accepts "+r+" arguments but "+t.length+" were given."),new Error("Code error")}function h(e,t,r){if(t.length<r)throw $("#output").val("Error: "+e+" accepts "+r+" or more arguments but "+t.length+" were given."),new Error("Code error")}function v(e){if(!p.has(e))throw $("#output").val("Error: Variable "+e+" does not exist."),new Error("Code error")}function w(e){for(var t=p.get(e)-i,r=0;r<Math.abs(t);r++)t<0?u+="<":0<t&&(u+=">");i+=t}var g={createVariable:function(e){if(f("var",e,1),!p.has(e[0])){for(var t=0,r=0;;r++)if(!c.includes(r)){t=r;break}p.set(e[0],t),c.push(t),l[l.length-1].variables.push(t)}},add:function(e){var t=parseInt(e[1]);f("add",e,2),v(e[0]);var r=function(e){for(var t=[],r=[0,0],n=9999,i=-5;i<6;i++)for(var o=1;o<e+i+1;o++)(e+i)%o==0&&(t.push([o,Math.floor((e+i)/o)]),o+(e+i)/o+Math.abs(i)<n&&(n=o+(e+1)/o+Math.abs(i),r=[o,Math.floor((e+i)/o)]));return r}(Math.abs(t));if(r[0]+r[1]+5>Math.abs(t)){w(e[0]);for(var n=0;n<Math.abs(t);n++)0<t&&(u+="+"),t<0&&(u+="-")}else{w("temp");for(n=0;n<Math.floor(r[0]);n++)u+="+";u+="[",w(e[0]);for(n=0;n<Math.floor(r[1]);n++)0<t&&(u+="+"),t<0&&(u+="-");w("temp"),u+="-]";var i=1;t<0&&(i*=-1),w(e[0]);for(var o=t-Math.floor(r[0])*Math.floor(r[1]*i),n=0;n<Math.abs(Math.floor(o));n++)0<Math.floor(o)&&(u+="+"),Math.floor(o)<0&&(u+="-")}},clear:function(e){f("clear",e,1),v(e[0]),w(e[0]),u+="[-]"},set:function(e){f("set",e,2),v(e[0]),g.clear([e[0]]),g.add([e[0],e[1]])},move:function(e){f("move",e,2),v(e[0]),v(e[1]),w(e[0]),u+="[-",w(e[1]),u+="+",w(e[0]),u+="]"},copy:function(e){h("copy",e,2);for(var t=e.slice(1),r=t.length,n=0;n<r;n++)v(t[n]);g.move([e[0],"temp"]),w("temp"),u+="[-";for(n=0;n<e.length;n++)w(e[n]),u+="+";w("temp"),u+="]"},multiply:function(e){f("multiply",e,2),v(e[0]),g.move([e[0],"temp"]),w("temp"),u+="[-",w(e[0]),u+="+".repeat(parseInt(e[1])),w("temp"),u+="]"},pause:function(e){f("pause",e,0),w("temp"),u+="[]-[]"},while:function(e){f("#while",e,1),v(e[0]),w(e[0]),u+="[",l.push(new m("while",e[0]))},end:function(e){var t,r;f("end",e,0);var n=l.pop();try{for(var i=__values(p.keys()),o=i.next();!o.done;o=i.next()){var a=o.value;n.variables.includes(p.get(a))&&p.delete(a)}}catch(e){t={error:e}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}c=c.filter(function(e){return!n.variables.includes(e)}),"while"==n.type&&(w(n.variable),u+="]")},scope:function(e){f("#scope",e,0),l.push(new m("scope"))},input:function(e){f("input",e,1),v(e[0]),w(e[0]),u+=","},print:function(e){f("print",e,1),v(e[0]),w(e[0]),u+="."},printletter:function(e){f("printletter",e,1),g.set(["temp2",e[0].charCodeAt(0)]),w("temp2"),u+=".",g.clear(["temp2"])},addletter:function(e){f("addletter",e,2),v(e[0]),g.add([e[0],e[1].charCodeAt(0)])},setletter:function(e){f("setletter",e,2),v(e[0]),g.set([e[0],e[1].charCodeAt(0)])},if:function(e){f("#if",e,3),v(e[0]),g.createVariable(["temp3"]),"var"==e[1]?(v(e[2]),g.move([e[0],"temp2"]),g.while(["temp2"]),g.add([e[0],1]),g.add(["temp",1]),g.add(["temp2",-1]),g.end([]),g.move([e[2],"temp2"]),g.while(["temp2"]),g.add([e[2],1]),g.add(["temp3",1]),g.add(["temp2",-1]),g.end([]),g.while(["temp"]),g.add(["temp",-1]),g.add(["temp3",-1]),g.end([]),g.add(["temp2",1]),g.while(["temp3"]),g.clear(["temp3"]),g.add(["temp2",-1]),g.end([]),g.while(["temp2"]),g.clear(["temp2"])):"num"!=e[1]&&"letter"!=e[1]||("letter"==e[1]&&(e[1]=e[1].charCodeAt(0)),g.copy([e[0],"temp3"]),g.add(["temp2",e[2]]),g.while(["temp3"]),g.add(["temp3",-1]),g.add(["temp2",-1]),g.end([]),g.move(["temp2","temp"]),g.while(["temp"]),g.clear(["temp"]),g.add(["temp2",1]),g.end([]),g.add(["temp2",-1]),g.while(["temp2"]),g.clear(["temp2"]))},ifn:function(e){f("#ifn",e,3),g.if(e),g.else([])},else:function(e){g.set(["temp",-1]),g.end([]),g.add(["temp",1]),g.while(["temp"]),g.clear(["temp"])},printstr:function(e){h("printstr",e,1);for(var t=0,r=e.join(" "),n=0;n<r.length;n++)g.add(["temp2",r.charCodeAt(n)-t]),t=r.charCodeAt(n),g.print(["temp2"]);g.clear(["temp2"])},printl:function(e){h("printstr",e,1);for(var t=0,r=e.join(" "),n=0;n<r.length;n++)g.add(["temp2",r.charCodeAt(n)-t]),t=r.charCodeAt(n),g.print(["temp2"]);g.add(["temp2",10-t]),g.print(["temp2"]),g.clear(["temp2"])},iftrue:function(e){f("#iftrue",e,1),v(e[0]),g.copy([e[0],"temp2"]),g.while(["temp2"]),g.clear(["temp2"])},iffalse:function(e){f("#iffalse",e,1),v(e[0]),g.iftrue([e[0]]),g.add(["temp",1]),g.end([]),g.add(["temp",-1]),g.while(["temp"]),g.clear(["temp"])},imove:function(e){f("imove",e,2),v(e[0]),v(e[1]),g.while([e[0]]),g.add([e[0],-1]),g.add([e[1],-1]),g.end([])},divnum:function(e){f("div",e,3),v(e[0]),v(e[2]),g.createVariable(["temp4"]);var t=parseInt(e[1]);g.move([e[0],"temp4"]),g.while(["temp4"]),g.add(["temp4",-1]),g.add([e[2],1]),g.if([e[2],"num",t]),g.clear([e[2]]),g.add([e[0],1]),g.end([]),g.end([])},goto:function(e){f("move",e,1),v(e[0]),w(e[0])},printdec:function(e){f("printdec",e,1),v(e[0]),g.createVariable(["temp4"]),g.createVariable(["printdec-one"]),g.createVariable(["printdec-ten"]),g.createVariable(["printdec-hun"]),g.clear(["printdec-one"]),g.clear(["printdec-ten"]),g.clear(["printdec-hun"]),g.copy([e[0],"printdec-one"]),g.divnum(["printdec-one",10,"printdec-ten"]),g.switch(["printdec-one","printdec-ten"]),g.divnum(["printdec-ten",10,"printdec-hun"]),g.switch(["printdec-ten","printdec-hun"]),g.copy(["printdec-hun","temp4"]),g.iftrue(["temp4"]),g.add(["printdec-hun",48]),g.print(["printdec-hun"]),g.end([]),g.copy(["printdec-ten","temp4"]),g.iftrue(["temp4"]),g.add(["printdec-ten",48]),g.print(["printdec-ten"]),g.end([]),g.clear(["temp4"]),g.add(["printdec-one",48]),g.print(["printdec-one"])},switch:function(e){f("switch",e,2),v(e[0]),v(e[1]),g.move([e[0],"temp"]),g.move([e[1],e[0]]),g.move(["temp",e[1]])},newl:function(e){f("newl",e,0),g.print(["newl"])},space:function(e){f("space",e,0),g.print(["space"])},for:function(e){f("#for",e,1),v(e[0]),g.while([e[0]]),g.add([e[0],-1])},enumtype:function(e){h("enumtype",e,2),o.set(e[0],new t(e.splice(1)))},createenum:function(e){if(f("createeum",e,2),!o.has(e[1]))throw $("#output").val("No enum type "+e[1]+" exists"),new Error("Code error");a.set(e[0],e[1]),g.createVariable([e[0]])},setenum:function(e){if(h("setenum",e,2),!a.has(e[0]))throw $("#output").val("No enum "+e[0]+" exists"),new Error("Code error");if(!o.get(a.get(e[0])).assignments.has(e[1]))throw $("#output").val("Enum type "+a.get(e[0])+" does not have a property: "+e[1]),new Error("Code error");g.set([e[0],o.get(a.get(e[0])).assignments.get(e[1])])},ifenum:function(e){if(h("#ifenum",e,2),!a.has(e[0]))throw $("#output").val("No enum "+e[0]+" exists"),new Error("Code error");if(!o.get(a.get(e[0])).assignments.has(e[1]))throw $("#output").val("Enum type "+a.get(e[0])+" does not have a property: "+e[1]),new Error("Code error");g.if([e[0],"num",o.get(a.get(e[0])).assignments.get(e[1])])},ifnenum:function(e){h("#ifenum",e,2),g.ifenum(e),g.else([])}},b={var:g.createVariable,add:g.add,addletter:g.addletter,setletter:g.setletter,clear:g.clear,set:g.set,move:g.move,imove:g.imove,copy:g.copy,multiply:g.multiply,"#pause":g.pause,"#for":g.for,"#while":g.while,"#end":g.end,"#scope":g.scope,input:g.input,print:g.print,printletter:g.printletter,printstr:g.printstr,printl:g.printl,divnum:g.divnum,"#if":g.if,"#iftrue":g.iftrue,"#iffalse":g.iffalse,"#else":g.else,goto:g.goto,printdec:g.printdec,switch:g.switch,newl:g.newl,space:g.space,enumtype:g.enumtype,createenum:g.createenum,setenum:g.setenum,"#ifenum":g.ifenum,"#ifnenum":g.ifnenum};$("#build").click(function(){(p=new Map).set("temp2",0),p.set("temp",1),c=[0,1],i=0,u="",l=[new m("scope")],o=new Map,a=new Map;for(var e=$("#input").val(),t=0;t<s.length;t++)e=s[t](e);for(var r=e.split("\n"),n=Array(r.length).fill(null),t=0;t<r.length;t++){if(n[t]=r[t].split(" "),!b.hasOwnProperty(n[t][0]))throw $("#output").val("Error: Command "+n[t][0]+" does not exist."),new Error("Error");b[n[t][0]](n[t].slice(1))}for(t=0;t<d.length;t++)u=d[t](u);$("#output").val(u)}),null===localStorage.getItem("bfc-text")?localStorage.setItem("bfc-text",""):$("#input").val(localStorage.getItem("bfc-text")),$("#input").on("input",function(){localStorage.setItem("bfc-text",$("#input").val())}),$("#rmLocalStorage").click(function(){$("#input").val(""),$("#output").val(""),localStorage.setItem("bfc-text","")})}();