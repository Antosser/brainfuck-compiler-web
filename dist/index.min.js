var variables,usedmemory,position,result,scopes,enumtypes,enums,__values=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],s=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&s>=t.length&&(t=void 0),{value:t&&t[s++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},preprocessor=[function(t){for(var e=t.split("\n"),n=0;n<e.length;n++)e[n]=e[n].trim();return e.join("\n")},function(t){for(var e=t.split("\n"),n="",s=0;s<e.length;s++)e[s].startsWith("//")||(n+=e[s]+"\n");return n},function(t){return t.split("\n").filter(function(t){return t}).join("\n")},function(t){var e=t.split("\n");return e.includes("newl")&&(t="var newl\nadd newl 10\n"+t),e.includes("space")&&(t="var space\nadd space 32\n"+t),t}],postprocessor=[function(t){for(var e="",n=0;n<t.length;n++)e+=t[n],(n+1)%100==0&&(e+="\n");return e}],Scope=function(t,e){this.type=t,this.variables=[],this.variable=e},BfEnum=function(t){var e=this;this.assignments=new Map;var n=1;t.forEach(function(t){e.assignments.set(t,n),n++})};function testArgs(t,e,n){if(e.length!=n)throw $("#output").val("Error: "+t+" accepts "+n+" arguments but "+e.length+" were given."),new Error("Code error")}function testMoreArgs(t,e,n){if(e.length<n)throw $("#output").val("Error: "+t+" accepts "+n+" or more arguments but "+e.length+" were given."),new Error("Code error")}function varExists(t){if(!variables.has(t))throw $("#output").val("Error: Variable "+t+" does not exist."),new Error("Code error")}function bestMultiplication(t){for(var e=[],n=[0,0],s=9999,o=-5;o<6;o++)for(var r=1;r<t+o+1;r++)(t+o)%r==0&&(e.push([r,Math.floor((t+o)/r)]),r+(t+o)/r+Math.abs(o)<s&&(s=r+(t+1)/r+Math.abs(o),n=[r,Math.floor((t+o)/r)]));return n}function move(t){for(var e=variables.get(t)-position,n=0;n<Math.abs(e);n++)e<0?result+="<":0<e&&(result+=">");position+=e}var functions={createVariable:function(t){if(testArgs("var",t,1),!variables.has(t[0])){for(var e=0,n=0;;n++)if(!usedmemory.includes(n)){e=n;break}variables.set(t[0],e),usedmemory.push(e),scopes[scopes.length-1].variables.push(e)}},add:function(t){var e=parseInt(t[1]);testArgs("add",t,2),varExists(t[0]);var n=bestMultiplication(Math.abs(e));if(n[0]+n[1]+5>Math.abs(e)){move(t[0]);for(var s=0;s<Math.abs(e);s++)0<e&&(result+="+"),e<0&&(result+="-")}else{move("temp");for(s=0;s<Math.floor(n[0]);s++)result+="+";result+="[",move(t[0]);for(s=0;s<Math.floor(n[1]);s++)0<e&&(result+="+"),e<0&&(result+="-");move("temp"),result+="-]";var o=1;e<0&&(o*=-1),move(t[0]);for(var r=e-Math.floor(n[0])*Math.floor(n[1]*o),s=0;s<Math.abs(Math.floor(r));s++)0<Math.floor(r)&&(result+="+"),Math.floor(r)<0&&(result+="-")}},clear:function(t){testArgs("clear",t,1),varExists(t[0]),move(t[0]),result+="[-]"},set:function(t){testArgs("set",t,2),varExists(t[0]),functions.clear([t[0]]),functions.add([t[0],t[1]])},move:function(t){testArgs("move",t,2),varExists(t[0]),varExists(t[1]),move(t[0]),result+="[-",move(t[1]),result+="+",move(t[0]),result+="]"},copy:function(t){testMoreArgs("copy",t,2);for(var e=t.slice(1),n=e.length,s=0;s<n;s++)varExists(e[s]);functions.move([t[0],"temp"]),move("temp"),result+="[-";for(s=0;s<t.length;s++)move(t[s]),result+="+";move("temp"),result+="]"},multiply:function(t){testArgs("multiply",t,2),varExists(t[0]),functions.move([t[0],"temp"]),move("temp"),result+="[-",move(t[0]),result+="+".repeat(parseInt(t[1])),move("temp"),result+="]"},pause:function(t){testArgs("pause",t,0),move("temp"),result+="[]-[]"},while:function(t){testArgs("#while",t,1),varExists(t[0]),move(t[0]),result+="[",scopes.push(new Scope("while",t[0]))},end:function(t){var e,n;testArgs("end",t,0);var s=scopes.pop();try{for(var o=__values(variables.keys()),r=o.next();!r.done;r=o.next()){var i=r.value;s.variables.includes(variables.get(i))&&variables.delete(i)}}catch(t){e={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}usedmemory=usedmemory.filter(function(t){return!s.variables.includes(t)}),"while"==s.type&&(move(s.variable),result+="]")},scope:function(t){testArgs("#scope",t,0),scopes.push(new Scope("scope"))},input:function(t){testArgs("input",t,1),varExists(t[0]),move(t[0]),result+=","},print:function(t){testArgs("print",t,1),varExists(t[0]),move(t[0]),result+="."},printletter:function(t){testArgs("printletter",t,1),functions.set(["temp2",t[0].charCodeAt(0)]),move("temp2"),result+=".",functions.clear(["temp2"])},addletter:function(t){testArgs("addletter",t,2),varExists(t[0]),functions.add([t[0],t[1].charCodeAt(0)])},setletter:function(t){testArgs("setletter",t,2),varExists(t[0]),functions.set([t[0],t[1].charCodeAt(0)])},if:function(t){testArgs("#if",t,3),varExists(t[0]),functions.createVariable(["temp3"]),"var"==t[1]?(varExists(t[2]),functions.move([t[0],"temp2"]),functions.while(["temp2"]),functions.add([t[0],1]),functions.add(["temp",1]),functions.add(["temp2",-1]),functions.end([]),functions.move([t[2],"temp2"]),functions.while(["temp2"]),functions.add([t[2],1]),functions.add(["temp3",1]),functions.add(["temp2",-1]),functions.end([]),functions.while(["temp"]),functions.add(["temp",-1]),functions.add(["temp3",-1]),functions.end([]),functions.add(["temp2",1]),functions.while(["temp3"]),functions.clear(["temp3"]),functions.add(["temp2",-1]),functions.end([]),functions.while(["temp2"]),functions.clear(["temp2"])):"num"!=t[1]&&"letter"!=t[1]||("letter"==t[1]&&(t[1]=t[1].charCodeAt(0)),functions.copy([t[0],"temp3"]),functions.add(["temp2",t[2]]),functions.while(["temp3"]),functions.add(["temp3",-1]),functions.add(["temp2",-1]),functions.end([]),functions.move(["temp2","temp"]),functions.while(["temp"]),functions.clear(["temp"]),functions.add(["temp2",1]),functions.end([]),functions.add(["temp2",-1]),functions.while(["temp2"]),functions.clear(["temp2"]))},ifn:function(t){testArgs("#ifn",t,3),functions.if(t),functions.else([])},else:function(t){functions.set(["temp",-1]),functions.end([]),functions.add(["temp",1]),functions.while(["temp"]),functions.clear(["temp"])},printstr:function(t){testMoreArgs("printstr",t,1);for(var e=0,n=t.join(" "),s=0;s<n.length;s++)functions.add(["temp2",n.charCodeAt(s)-e]),e=n.charCodeAt(s),functions.print(["temp2"]);functions.clear(["temp2"])},printl:function(t){testMoreArgs("printstr",t,1);for(var e=0,n=t.join(" "),s=0;s<n.length;s++)functions.add(["temp2",n.charCodeAt(s)-e]),e=n.charCodeAt(s),functions.print(["temp2"]);functions.add(["temp2",10-e]),functions.print(["temp2"]),functions.clear(["temp2"])},iftrue:function(t){testArgs("#iftrue",t,1),varExists(t[0]),functions.copy([t[0],"temp2"]),functions.while(["temp2"]),functions.clear(["temp2"])},iffalse:function(t){testArgs("#iffalse",t,1),varExists(t[0]),functions.iftrue([t[0]]),functions.add(["temp",1]),functions.end([]),functions.add(["temp",-1]),functions.while(["temp"]),functions.clear(["temp"])},imove:function(t){testArgs("imove",t,2),varExists(t[0]),varExists(t[1]),functions.while([t[0]]),functions.add([t[0],-1]),functions.add([t[1],-1]),functions.end([])},divnum:function(t){testArgs("div",t,3),varExists(t[0]),varExists(t[2]),functions.createVariable(["temp4"]);var e=parseInt(t[1]);functions.move([t[0],"temp4"]),functions.while(["temp4"]),functions.add(["temp4",-1]),functions.add([t[2],1]),functions.if([t[2],"num",e]),functions.clear([t[2]]),functions.add([t[0],1]),functions.end([]),functions.end([])},goto:function(t){testArgs("move",t,1),varExists(t[0]),move(t[0])},printdec:function(t){testArgs("printdec",t,1),varExists(t[0]),functions.createVariable(["temp4"]),functions.createVariable(["printdec-one"]),functions.createVariable(["printdec-ten"]),functions.createVariable(["printdec-hun"]),functions.clear(["printdec-one"]),functions.clear(["printdec-ten"]),functions.clear(["printdec-hun"]),functions.copy([t[0],"printdec-one"]),functions.divnum(["printdec-one",10,"printdec-ten"]),functions.switch(["printdec-one","printdec-ten"]),functions.divnum(["printdec-ten",10,"printdec-hun"]),functions.switch(["printdec-ten","printdec-hun"]),functions.copy(["printdec-hun","temp4"]),functions.iftrue(["temp4"]),functions.add(["printdec-hun",48]),functions.print(["printdec-hun"]),functions.end([]),functions.copy(["printdec-ten","temp4"]),functions.iftrue(["temp4"]),functions.add(["printdec-ten",48]),functions.print(["printdec-ten"]),functions.end([]),functions.clear(["temp4"]),functions.add(["printdec-one",48]),functions.print(["printdec-one"])},switch:function(t){testArgs("switch",t,2),varExists(t[0]),varExists(t[1]),functions.move([t[0],"temp"]),functions.move([t[1],t[0]]),functions.move(["temp",t[1]])},newl:function(t){testArgs("newl",t,0),functions.print(["newl"])},space:function(t){testArgs("space",t,0),functions.print(["space"])},for:function(t){testArgs("#for",t,1),varExists(t[0]),functions.while([t[0]]),functions.add([t[0],-1])},enumtype:function(t){testMoreArgs("enumtype",t,2),enumtypes.set(t[0],new BfEnum(t.splice(1)))},createenum:function(t){if(testArgs("createeum",t,2),!enumtypes.has(t[1]))throw $("#output").val("No enum type "+t[1]+" exists"),new Error("Code error");enums.set(t[0],t[1]),functions.createVariable([t[0]])},setenum:function(t){if(testMoreArgs("setenum",t,2),!enums.has(t[0]))throw $("#output").val("No enum "+t[0]+" exists"),new Error("Code error");if(!enumtypes.get(enums.get(t[0])).assignments.has(t[1]))throw $("#output").val("Enum type "+enums.get(t[0])+" does not have a property: "+t[1]),new Error("Code error");functions.set([t[0],enumtypes.get(enums.get(t[0])).assignments.get(t[1])])},ifenum:function(t){if(testMoreArgs("#ifenum",t,2),!enums.has(t[0]))throw $("#output").val("No enum "+t[0]+" exists"),new Error("Code error");if(!enumtypes.get(enums.get(t[0])).assignments.has(t[1]))throw $("#output").val("Enum type "+enums.get(t[0])+" does not have a property: "+t[1]),new Error("Code error");functions.if([t[0],"num",enumtypes.get(enums.get(t[0])).assignments.get(t[1])])},ifnenum:function(t){testMoreArgs("#ifenum",t,2),functions.ifenum(t),functions.else([])}},commands={var:functions.createVariable,add:functions.add,addletter:functions.addletter,setletter:functions.setletter,clear:functions.clear,set:functions.set,move:functions.move,imove:functions.imove,copy:functions.copy,multiply:functions.multiply,"#pause":functions.pause,"#for":functions.for,"#while":functions.while,"#end":functions.end,"#scope":functions.scope,input:functions.input,print:functions.print,printletter:functions.printletter,printstr:functions.printstr,printl:functions.printl,divnum:functions.divnum,"#if":functions.if,"#iftrue":functions.iftrue,"#iffalse":functions.iffalse,"#else":functions.else,goto:functions.goto,printdec:functions.printdec,switch:functions.switch,newl:functions.newl,space:functions.space,enumtype:functions.enumtype,createenum:functions.createenum,setenum:functions.setenum,"#ifenum":functions.ifenum,"#ifnenum":functions.ifnenum};$("#build").click(function(){(variables=new Map).set("temp2",0),variables.set("temp",1),usedmemory=[0,1],position=0,result="",scopes=[new Scope("scope")],enumtypes=new Map,enums=new Map;for(var t=$("#input").val(),e=0;e<preprocessor.length;e++)t=preprocessor[e](t);for(var n=t.split("\n"),s=Array(n.length).fill(null),e=0;e<n.length;e++){if(s[e]=n[e].split(" "),!commands.hasOwnProperty(s[e][0]))throw $("#output").val("Error: Command "+s[e][0]+" does not exist."),new Error("Error");commands[s[e][0]](s[e].slice(1))}for(e=0;e<postprocessor.length;e++)result=postprocessor[e](result);$("#output").val(result)}),null===localStorage.getItem("bfc-text")?localStorage.setItem("bfc-text",""):$("#input").val(localStorage.getItem("bfc-text")),$("#input").on("input",function(){localStorage.setItem("bfc-text",$("#input").val())}),$("#rmLocalStorage").click(function(){$("#input").val(""),$("#output").val(""),localStorage.setItem("bfc-text","")});